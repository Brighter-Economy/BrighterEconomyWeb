@page "/Items"

<MudStack Row="true" StretchItems="StretchItems.None" Justify="Justify.Center" AlignItems="AlignItems.Center" Class="pa-4">
    <MudTable T="ItemMarketTable"
              Items="@ItemMarketTableData"
              Hover="true"
              Breakpoint="Breakpoint.Sm"
              OnRowClick="RowClickEvent"
              Class="rounded-lg">
        <HeaderContent>
            <MudTh>
                <MudIcon Icon="@Icons.Material.Filled.Diamond"/>
            </MudTh>
            <MudTh>Item Name</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Item Picture">
                <MudIcon Icon="@Icons.Material.Filled.Diamond"/>
            </MudTd>
            <MudTd DataLabel="Item Name">@context.itemName</MudTd>
        </RowTemplate>
    </MudTable>
    <MudStack Justify="Justify.Center" AlignItems="AlignItems.Center">
        <MudText Typo="Typo.h3">Price Over Time</MudText>
        <MudChart ChartType="ChartType.Line" ChartSeries="@ItemPriceSeries" @bind-SelectedIndex="Index" XAxisLabels="@XAxisLabels" Width="100%" Height="70vh" ChartOptions="@Options"/>
        <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled">
            <MudButton>Placeholder 1</MudButton>
            <MudButton>Placeholder 2</MudButton>
            <MudButton>Placeholder 3</MudButton>
        </MudButtonGroup>
    </MudStack>
</MudStack>

@code {
    private int Index = -1;
    public ChartOptions Options = new ChartOptions();
    
    public List<ChartSeries> ItemPriceSeries = new List<ChartSeries>()
    {
        new ChartSeries() { Name = "Diamond", Data = new double[] { 90, 79, 72, 69, 62, 62, 55, 65, 70 }},
        new ChartSeries() {Name = "Carrots", Data = new double[] { 10, 41, 35, 51, 49, 62, 69, 91, 148 }},
        new ChartSeries() {Name = "Waystone", Data = new double[] { 76, 22, 13, 54, 12, 84, 53, 51, 62 }},
    };
    public string[] XAxisLabels = { "08/07/24", "08/08/24", "08/09/24", "08/10/24", "08/11/24", "08/12/24", "08/13/24", "08/14/24", "08/15/24" };

    private List<ItemMarketTable> ItemMarketTableData = new List<ItemMarketTable>();

    // placeholder to set the data in the side table manually with filler information
    private void SetDataTemp()
    {
        ItemMarketTableData.Add(new ItemMarketTable("minecraft:diamond", "Diamond"));
        ItemMarketTableData.Add(new ItemMarketTable("minecraft:carrot", "Carrot"));
        ItemMarketTableData.Add(new ItemMarketTable("waystones:waystone", "Waystone"));
    }

    private void RowClickEvent(TableRowClickEventArgs<ItemMarketTable> eventArgs)
    {
        //show or hide the entries in the chart here
    }
    
    protected override void OnInitialized()
    {
        SetDataTemp();
    }

}